{% extends 'base.html' %}

{% block head %}
    <title>Document</title>
{% endblock %}

{% block body %}
<div class="content">
    <h1>Title</h1>
    {% if tasks|length < 1 %}
    <h4> There are no tasks to display. </h4>
    {% else %}
    <table>
        <tr>
            <th>Task</th>
            <th>Addded</th>
            <th>Actions</th>
        </tr>
        {% for task in tasks %}
            <tr>
                <td>{{ task.content }}</td>
                <td>{{ task.date_created.date() }}</td>
                <td>
                    <a href="/update/{{task.id}}">Update</a>
                    <br>
                    <a href="/delete/{{task.id}}">Delete</a>
                </td>
            </tr>
        {% endfor %}
    </table>
    {% endif %}

    <form action="/" method="POST">
        <input type="text" name="content" id="content">
        <input type="submit" value="Add Task">
    </form>

    <br>

    <!-- chat -->
    <div class = "chat">
        <h3 style='color: #ccc;font-size: 30px;'>No message yet..</h3>
        <div class="message_holder"></div>
      
        <form id="chatform" action="" method="POST">
          <input type="text" class="username" placeholder="User Name">
          <input type="text" class="message" placeholder="Messages">
          <input type="submit">
        </form>

        <br>

        <form id="youtubeurl" action="" method="POST">
          <label>Youtube URL</label>
          <input type="text" class="url" placeholder="Enter URL here...">
          <input type="submit">
        </form>

        <div id="player"></div>

        <form id="youtube" action="" method="POST">
          <input type="button" class="play" value="Play" onclick="playFunction()">
          <input type="button" class="pause" value="Pause" onclick="pauseFunction()">
          <input type="button" class="debug" value="Debug" onclick="debugFunction()">
        </form>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.min.js"></script>
        <script src="{{ url_for('static', filename='javascript/socketio.js') }}"></script>
    </div>

    <!-- <script src="jsmpeg.min.js"></script>
    <div class="jsmpeg" data-url=window.location.host></div> -->

    <canvas id="video-canvas"></canvas>
	  <script src="{{ url_for('static', filename='javascript/jsmpeg.min.js') }}"></script>
	  <script type="text/javascript">
		  var canvas = document.getElementById('video-canvas');
		  var url = 'ws://'+document.location.hostname+':8082/';
		  var player = new JSMpeg.Player(url, {canvas: canvas});
	  </script>

    <!-- <br>
    
    <div id="player"></div>

    <script>
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'MFw6Uyg1rtQ',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
      }
      function stopVideo() {
        player.stopVideo();
      }
    </script>
</div> -->
{% endblock %}
